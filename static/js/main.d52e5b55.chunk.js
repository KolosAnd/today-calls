(this["webpackJsonptoday-calls-app"]=this["webpackJsonptoday-calls-app"]||[]).push([[0],{175:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var l=a(1),n=a.n(l),c=a(63),s=a.n(c),i=a(2),r=a(3),o=(a(73),a(6)),d=a(38),u=a.n(d),_=a(0),j=function(e){return Object(_.jsx)("div",{className:u.a.title,children:Object(_.jsx)("h2",{className:"".concat(u.a.title__name," ").concat(e.classes),children:e.text})})},m=(a(40),function(e,t){if(void 0!=e){var a=new Date(t),l=a.getHours(),n=a.getMinutes(),c=a.getSeconds(),s=a-b(l,n,c),i=10*e[0]+Number(e[1]),r=10*e[3]+Number(e[4]);return"number"==typeof e?s+e:s+b(i,r,0)}});function b(e,t,a){return 36e5*e+6e4*t+1e3*a}var x=function(e){if("string"!==typeof e){if(!e.toString())throw new Error("Invalid input");e=e.toString()}return b(10*e[0]+Number(e[1]),10*e[3]+Number(e[4]),0)},O=a(20),h=a(12),p=a(68),v=Object(l.createContext)(null),f={id:0,name:"",phone:"",time:"",milisec:0},N=O.a({name:O.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").test("\u0422\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442","\u0422\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442",(function(e){return/^\D+$/.test(e)})).min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(30,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").typeError("\u0422\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442"),phone:O.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").test("+(xxx)-xxx-xxx-xxx","+(xxx)-xxx-xxx-xxx",(function(e){return/^\+|(0{2})|[\(]?\d{3}[\)]?[-\s]?\d{3}[-\s]?\d{3}[-\s]?\d{3}$/.test(e)})).min(13,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043c\u0438\u043d\u0438\u043c\u0443\u043c 13 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(18,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 18 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440"),time:O.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").test("\u041d\u0435\u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0434\u0430\u0442\u0430","\u041d\u0435\u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0434\u0430\u0442\u0430",(function(e){return/^\d\d:\d\d+$/.test(e)})).typeError("\u0422\u043e\u043b\u044c\u043a\u043e \u0434\u0430\u0442\u0430")}).required(),C=function(e){var t,a,n,c=e.addOneCall,s=Object(l.useState)(f),i=Object(r.a)(s,2),d=i[0],u=i[1],b=Object(l.useContext)(v).calls,x={resolver:Object(p.a)(N)},O=Object(h.d)(x),C=O.register,g=O.formState.errors,k=O.handleSubmit;O.reset;return Object(l.useEffect)((function(){if(d.id){var e=b.concat([d]);localStorage.setItem("list",JSON.stringify(e)),c(d),u(f)}}),[d]),Object(_.jsxs)("div",{className:"add-call",children:[Object(_.jsx)(j,{text:"Add call"}),Object(_.jsxs)("form",{onSubmit:k((function(e){var t=new FormData;t.append("name",e.name),t.append("phone",e.phone),t.append("time",e.time);var a=m(d.time,Date.now()),l={id:Date.now(),milisec:a,phone:"00"+d.phone.replaceAll(/[\(\)\-\+\s]/g,"").replaceAll(/^(0{2})/g,"")};u(Object(o.a)(Object(o.a)({},d),l))})),children:[Object(_.jsxs)("div",{className:"add-call__inputs-wrap",children:[Object(_.jsxs)("div",{className:"add-call__input-block name",children:[Object(_.jsx)("input",Object(o.a)(Object(o.a)({},C("name")),{},{value:d.name,onChange:function(e){u(Object(o.a)(Object(o.a)({},d),{},{name:e.target.value}))},name:"name",type:"text",className:g.name?"add-call__input error":"add-call__input",placeholder:"Name",maxLength:30})),Object(_.jsx)("span",{className:"add-call__error-message",children:null===(t=g.name)||void 0===t?void 0:t.message})]}),Object(_.jsxs)("div",{className:"add-call__input-block phone",children:[Object(_.jsx)("input",Object(o.a)(Object(o.a)({},C("phone")),{},{onChange:function(e){u(Object(o.a)(Object(o.a)({},d),{},{phone:e.target.value}))},name:"phone",value:d.phone,placeholder:"+(\u0425\u0425X)-XX\u0425-X\u0425\u0425-\u0425\u0425\u0425",type:"text",className:g.phone?"add-call__input error":"add-call__input"})),Object(_.jsx)("span",{className:"add-call__error-message",children:null===(a=g.phone)||void 0===a?void 0:a.message})]}),Object(_.jsxs)("div",{className:"add-call__input-block time",children:[Object(_.jsx)("input",Object(o.a)(Object(o.a)({type:"time",name:"time"},C("time")),{},{value:d.time,onChange:function(e){u(Object(o.a)(Object(o.a)({},d),{},{time:e.target.value}))},className:g.time?"add-call__input error":"add-call__input"})),Object(_.jsx)("span",{className:"add-call__error-message",children:null===(n=g.time)||void 0===n?void 0:n.message})]})]}),Object(_.jsx)("button",{type:"submit",className:"button add-call__button",children:"Add call"})]})]})},g=(a(175),function(e){var t=e.remove,a=e.call,n=e.hidden,c=Object(l.useState)(!1),s=Object(r.a)(c,2),i=s[0],o=s[1],d=Object(l.useState)("calls-list__item"),u=Object(r.a)(d,2),j=u[0],b=u[1];return Object(l.useEffect)((function(){if(a.time){var e=x(a.time),t=m(e,Date.now());Date.now()>t&&o(!0)}}),[a]),Object(l.useEffect)((function(){"next"==n&&b(i?" hidden":""),"finished"==n&&b(i?"":" hidden"),"all"==n&&b("")}),[n]),Object(_.jsx)(_.Fragment,{children:a&&Object(_.jsxs)("div",{className:"calls-list__item ".concat(j),children:[Object(_.jsx)("div",{className:"calls-list__col name-col",children:a.name}),Object(_.jsx)("div",{className:"calls-list__col phone-col",children:a.phone}),Object(_.jsx)("div",{className:"calls-list__col time-col","data-milisec":a.milisec,children:a.time}),Object(_.jsx)("div",{className:"calls-list__col time-delete",children:Object(_.jsx)("span",{onClick:function(){return t(a.id)},children:"delete"})}),Object(_.jsx)("div",{className:"calls-list__col time-finish",children:Object(_.jsx)("input",{checked:i,type:"checkbox",disabled:!0})})]})})}),k=function(e){var t=e.calls,a=e.remove,n=Object(l.useState)(""),c=Object(r.a)(n,2),s=c[0],i=c[1],o=Object(l.useState)("all"),d=Object(r.a)(o,2),u=d[0],j=d[1];return Object(_.jsxs)("div",{className:"calls-list",children:[Object(_.jsxs)("div",{className:"calls-list__table",children:[Object(_.jsxs)("div",{className:"calls-list__headers",children:[Object(_.jsxs)("div",{className:"calls-list__col name-col",children:[Object(_.jsx)("span",{children:"Name"}),Object(_.jsxs)("div",{className:"calls-list__sort-block",children:[Object(_.jsx)("div",{className:"calls-list__sort-block-up",onClick:function(){return i("ascName")}}),Object(_.jsx)("div",{className:"calls-list__sort-block-down",onClick:function(){return i("descName")}})]})]}),Object(_.jsx)("div",{className:"calls-list__col phone-col",children:"Phone number"}),Object(_.jsxs)("div",{className:"calls-list__col time-col",children:[Object(_.jsx)("span",{children:"Time"}),Object(_.jsxs)("div",{className:"calls-list__sort-block",children:[Object(_.jsx)("div",{className:"calls-list__sort-block-up",onClick:function(){return i("ascTime")}}),Object(_.jsx)("div",{className:"calls-list__sort-block-down",onClick:function(){return i("descTime")}})]})]}),Object(_.jsx)("div",{className:"calls-list__col time-delete"}),Object(_.jsx)("div",{className:"calls-list__col time-finish"})]}),Object(_.jsx)("div",{className:"calls-list__cols-wrap",children:t.length?t.sort((function(e,t){return"ascTime"===s?function(e,t){return e.milisec-t.milisec}(e,t):"descTime"===s?function(e,t){return t.milisec-e.milisec}(e,t):"ascName"===s?function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}(e,t):"descName"===s?function(e,t){return e.name<t.name?1:e.name>t.name?-1:0}(e,t):void 0})).map((function(e){return Object(_.jsx)(g,{hidden:u,remove:a,call:e},e.id)})):Object(_.jsx)("div",{className:"calls-list__item",children:Object(_.jsx)("h1",{className:"calls-list__no-calls",children:"no calls today"})})})]}),Object(_.jsxs)("div",{className:"calls-list__buttons-wrap",children:[Object(_.jsx)("button",{onClick:function(){return j("all")},type:"button",className:"button calls-list__button",children:"All"}),Object(_.jsx)("button",{onClick:function(){return j("next")},type:"button",className:"button calls-list__button",children:"Next"}),Object(_.jsx)("button",{onClick:function(){return j("finished")},type:"button",className:"button calls-list__button",children:"Finished"})]})]})},w=a(28),S=a.n(w),y=function(e){return Object(_.jsx)("header",{className:S.a.header,children:Object(_.jsx)("div",{className:"".concat(S.a.header__container,"  container"),children:Object(_.jsx)(j,{classes:"".concat(S.a.header__title," main-title"),text:"Today calls app"})})})},T=a(7),D=a.n(T),E=function(e){var t=e.calls,a=Object(l.useState)([]),n=Object(r.a)(a,2),c=n[0],s=n[1],i=Object(l.useState)({}),o=Object(r.a)(i,2),d=o[0],u=o[1];Object(l.useEffect)((function(){t.length>0&&s(t.sort((function(e,t){return e.milisec>t.milisec?1:-1})))}),[t]),Object(l.useEffect)((function(){if(c.length>0){for(var e=0;e<c.length;e++){var t=x(c[e].time),a=m(t,Date.now());if(Date.now()<a){u(c[e]);break}u(null)}var l=b();return function(){clearInterval(l)}}}),[c]);var b=function(){return setInterval((function(){for(var e=0;e<c.length;e++){var t=x(c[e].time),a=m(t,Date.now());if(Date.now()<a){u(c[e]);break}}}),6e4)};return Object(_.jsx)("div",{className:D.a.nextCall,children:Object(_.jsxs)("div",{className:D.a.nextCall__wrap,children:[Object(_.jsx)(j,{text:"Next call"}),d?Object(_.jsxs)("div",{className:D.a.nextCall__inputWrap,children:[Object(_.jsx)("div",{className:D.a.nextCall__input+" "+D.a.nextCall__inputName,children:d.name}),Object(_.jsx)("div",{className:D.a.nextCall__input+" "+D.a.nextCall__inputPhone,children:d.phone}),Object(_.jsxs)("div",{className:D.a.nextCall__input+" "+D.a.nextCall__inputTime,children:[" ",d.time]})]}):Object(_.jsx)("div",{className:D.a.nextCall__inputWrap,children:Object(_.jsx)("div",{className:D.a.nextCall__input+" "+D.a.nextCall__inputName,children:"No next call"})})]})})},I=a(37),A="filter/ALL",W="filter/NEXT",J="filter/FINISH";var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{value:"all"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return{value:"all"};case W:return{value:"next"};case J:return{value:"finish"};default:return e}},P=a(67);var X=function(){var e=Object(I.createStore)(H,Object(P.composeWithDevTools)());e.subscribe((function(){return console.log(e.getState())}));var t=Object(l.useState)((function(){return function(){var e=JSON.parse(localStorage.getItem("list"));return null==e?[]:e}()})),a=Object(r.a)(t,2),n=a[0],c=a[1];return Object(l.useEffect)((function(){n.length&&localStorage.setItem("list",JSON.stringify(n))}),[n]),Object(_.jsx)(v.Provider,{value:{calls:n},children:Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)(y,{}),Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"main-wrap",children:[Object(_.jsx)(E,{calls:n}),Object(_.jsxs)("div",{className:"calls-wrap",children:[Object(_.jsx)(C,{addOneCall:function(e){c([].concat(Object(i.a)(n),[e]))}}),Object(_.jsx)(k,{remove:function(e){var t=n.filter((function(t){return t.id!==e}));c(t)},calls:n})]})]})})]})})};s.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(X,{})}),document.getElementById("root"))},28:function(e,t,a){e.exports={header:"Header_header__2vzj5",header__container:"Header_header__container__3VRL9",header__title:"Header_header__title__2pv23"}},38:function(e,t,a){e.exports={title:"Title_title__38Rue",title__name:"Title_title__name__G7AnC","main-title":"Title_main-title__15ozn"}},40:function(e,t,a){},7:function(e,t,a){e.exports={nextCall:"NextCall_nextCall__2hiNO",nextCall__wrap:"NextCall_nextCall__wrap__E-JmG",nextCall__title:"NextCall_nextCall__title__3uk50",nextCall__inputWrap:"NextCall_nextCall__inputWrap__3k8d4",nextCall__inputsWrap:"NextCall_nextCall__inputsWrap__2i2Go",nextCall__input:"NextCall_nextCall__input__3VO86",nextCall__inputName:"NextCall_nextCall__inputName__3dOlZ",nextCall__inputPhone:"NextCall_nextCall__inputPhone__37SD1",nextCall__inputTime:"NextCall_nextCall__inputTime__2rI6V"}},73:function(e,t,a){}},[[176,1,2]]]);
//# sourceMappingURL=main.d52e5b55.chunk.js.map